$(document).ready(function(){$("#changesSaved").hide();$("#fname").val()==localStorage.getItem("fname");$("#lname").val()==localStorage.getItem("lname");$("#bref").val()==localStorage.getItem("bref");$("#additionalInfo").hide();$(".speech-bubble").click(function(){$("#formarea").slideToggle();$("#formarea").css("visibility","visible");$(this).toggleClass("roundedBottom")});if($("#accept").on("click",function(){$("footer").css("visibility","hidden");$("#submitBtn").on("click",function(){if(localStorage){var fname=$("#fname").val();var lname=$("#lname").val();var bref=$("#bref").val();localStorage.setItem("fname",fname);localStorage.setItem("lname",lname);localStorage.setItem("bref",bref)}})}));$("#decline").on("click",function(){$("footer").css("visibility","hidden")})
function validateFname(x){if(x==""){$('input[id="fname"]').addClass("wronginput");$("#name1").text("Fields cannot be left blank.")}else if(!/[a-zA-Z]/.test(x)){$('input[id="fname"]').addClass("wronginput");$("#name1").text("Name must only contain alphabetic characters.")}else{$('input[id="fname"]').removeClass("wronginput");$("#name1").text("");return!0}}
function validateLname(x){if(x==""){$('input[id="lname"]').addClass("wronginput");$("#name2").text("Fields cannot be left blank.")}else if(!/[a-zA-Z]/.test(x)){$('input[id="lname"]').addClass("wronginput");$("#name2").text("Name must only contain alphabetic characters.")}else{$('input[id="lname"]').removeClass("wronginput");$("#name2").text("");return!0}}
function validateBookingRef(x){if(x==""){$('input[id="bref"]').addClass("wronginput");$("#book").text("Fields cannot be left blank.")}else if(/^[a-zA-Z]{3}[0-9]{6}/.test(x)){$('input[id="bref"]').removeClass("wronginput");$("#book").text("");return!0}else{$("#book").text("Please enter a valid booking reference.")}}
function checkEmpty(x){while(x==""){$("#leftblank").text("*Fields cannot be left blank.");return!0}}
function alphaOnly(x){if(/[a-zA-Z]/.test(x)){return!0}else{alert("Field must only contain alphabetic characters.")}}
function numberOnly(x){if(/^\d+$/.test(x)){return!0}else{alert("Field must only contain numeric characters.")}}
function displayQuote(){$("#additionalInfo").show();$("#bref").attr("disabled",!0);$("#submitBtn").hide();return!0}
$("#submitBtn").on("click",function(e){e.preventDefault();var fname=document.forms.myForm.fname.value;var lname=document.forms.myForm.lname.value;var bref=document.forms.myForm.bref.value;validateFname(fname);validateLname(lname);validateBookingRef(bref);if(validateFname(fname)&&validateLname(lname)&&validateBookingRef(bref)){displayQuote()}});$("#savechanges").on("click",function(f){f.preventDefault();var destination=document.forms.detailsForm.destination.value;var deptdate=document.forms.detailsForm.deptdate.value;var duration=document.forms.detailsForm.duration.value;var partysize=document.forms.detailsForm.partysize.value;var dairport=document.forms.detailsForm.dairport.value;var aairport=document.forms.detailsForm.aairport.value;if(!checkEmpty(destination)&&!checkEmpty(deptdate)&&!checkEmpty(duration)&&!checkEmpty(partysize)&&!checkEmpty(dairport)&&!checkEmpty(aairport)){alphaOnly(destination);numberOnly(duration);numberOnly(partysize);alphaOnly(dairport);alphaOnly(aairport)}
if(alphaOnly(destination)&&numberOnly(duration)&&numberOnly(partysize)&&alphaOnly(dairport)&&alphaOnly(aairport)){$("#myForm").hide();$(".speech-bubble").hide();$("#formarea").hide();$("#changesSaved").show()}});const hover=document.getElementById("hover");const toolTipBox=document.createElement("div");toolTipBox.class="toolTip1";toolTipBox.style.visibility="hidden";toolTipBox.style.position="fixed";toolTipBox.style.top="1ex";toolTipBox.style.left="1ex";toolTipBox.style.padding="0.5em";toolTipBox.style.width="10em";toolTipBox.style.borderRadius="0.1em";toolTipBox.style.backgroundColor="#939393";toolTipBox.style.color="#fff";document.body.appendChild(toolTipBox);const toolTipOn=((evt)=>{const boundBox=evt.target.getBoundingClientRect();const coordX=boundBox.left;const coordY=boundBox.top;toolTipBox.style.left=(coordX+40).toString()+"px";toolTipBox.style.top=(coordY+40).toString()+"px";toolTipBox.innerHTML="e.g. TLB123456";toolTipBox.style.visibility="visible"});var toolTipOff=(()=>{toolTipBox.style.visibility="hidden"});hover.addEventListener("mouseover",toolTipOn,!1);hover.addEventListener("mouseout",toolTipOff,!1);document.getElementById("hover").addEventListener("click",toolTipOff,!1);$("#deptdate").datepicker({dateFormat:'dd/mm/yy',minDate:0,onSelect:function(dateText){$("#deptdate").datepicker('option','minDate',min)}});$("#submitBtn").on("click",function(){var input=$("#bref").val();$.getJSON("scripts/index-min.json").done(function(data){console.log(data);$("#destination").val(data[input].destination);$("#deptdate").val(data[input].deptdate);$("#duration").val(data[input].duration);$("#partysize").val(data[input].partysize);$("#dairport").val(data[input].dairport);$("#aairport").val(data[input].aairport)}).fail(function(){alert("There was an error retrieving data from the server.")})});$("#submitContact").on("click",function(e){e.preventDefault();$("#contactname").val("");$("#contactemail").val("");$("#query").val("");$("#thankYou").append("Thanks for getting in touch. We'll get back to you as soon as we can.")})})